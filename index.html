<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casamento de Rhamon & Vitória</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Adiciona o Google Font: Roboto Mono -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Cabeçalho -->
    <header>
        <div class="header-content">
            <h1>Rhamon & Vitória</h1>
            <p>Data: 19/04/2025</p>
            <div class="countdown" id="countdown"></div>
        </div>
    </header>
    <!-- Navegação de Abas -->
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'home')">Home</button>
        <button class="tablinks" onclick="openTab(event, 'confirmacao')">Confirmação de Presença</button>
        <button class="tablinks" onclick="openTab(event, 'informacoes')">Informações</button>
        <!-- Adicionar aba de Lista de Presentes -->
        <button class="tablinks" onclick="openTab(event, 'presentes')">Lista de Presentes</button>
        <!-- Adicionar aba de Administração, visível apenas após login -->
        <button class="tablinks" id="admin-tab" onclick="openTab(event, 'admin')" style="display:none;">Administração</button>
        <button class="tablinks" onclick="openTab(event, 'mensagens')">Mensagens</button>
        <button class="tablinks" onclick="openTab(event, 'historia')">Nossa História</button>
    </div>

<!-- Seção: Home -->
<div id="home" class="tabcontent">
    <h2>Bem-vindos ao nosso site de casamento!</h2>
    <p>Estamos muito felizes em compartilhar esse momento especial com vocês. Aqui, você encontrará todas as informações sobre o nosso grande dia, poderá confirmar sua presença, deixar mensagens para nós, e muito mais!</p>
    <p>Contamos com a presença de todos para celebrarmos juntos!</p>

    <!-- Imagem Responsiva -->
    <div class="image-container">
        <img src="IMG-20220621-WA0047.jpeg" alt="Foto do casal" class="responsive-img">
    </div>
</div>


    <!-- Seção: Confirmação de Presença -->
    <div id="confirmacao" class="tabcontent">
        <h2>Confirme sua Presença</h2>
        <form id="confirmacao-form">
            <input type="text" id="nome" placeholder="Seu Nome" required>
            <input type="text" id="pin" placeholder="PIN de Confirmação" required>
            <label for="adultos">Número de Adultos:</label>
            <input type="number" id="adultos" value="1" min="1" required>
            <label for="criancas">Número de Crianças:</label>
            <input type="number" id="criancas" value="0" min="0" required>
            <button type="submit">Confirmar Presença</button>
        </form>
        <div id="confirmacoes-enviadas">
            <!-- Aqui aparecerão as confirmações de presença -->
        </div>
    </div>
    <!-- Seção: Informações do Casamento -->
    <div id="informacoes" class="tabcontent">
        <h2>Detalhes do Casamento</h2>
        <p><strong>Data:</strong> 19/04/2025</p>
        <p><strong>Horário:</strong> 17:00</p>
        <p><strong>Local:</strong> A DEFINIR</p>
        <!-- Localização usando Google Maps -->
        <div id="mapa" style="width:100%;height:300px;"></div>
        <p><strong>Endereço:</strong> A DEFINIR</p>
    </div>

    <!-- Seção: Mensagens para os Noivos -->
    <div id="mensagens" class="tabcontent">
        <h2>Deixe uma mensagem para os noivos</h2>
        <form id="mensagem-form">
            <input type="text" id="nome-mensagem" placeholder="Seu Nome" required>
            <textarea id="comentario" placeholder="Escreva sua mensagem..." required></textarea>
            <button type="submit">Enviar Mensagem</button>
        </form>
        <div id="mensagens-enviadas">
            <!-- Aqui vão aparecer as mensagens enviadas -->
        </div>
    </div>
<!-- Seção: Lista de Presentes -->
<div id="presentes" class="tabcontent">
    <h2>Escolha seu Presente</h2>
    <form id="presentes-form">
        <input type="text" id="nome-convidado" placeholder="Seu Nome" required>
        <label for="presente">Escolha um presente:</label>
        <select id="presente-lista" required>
            <option value="" disabled selected>Selecione um presente</option>
            <option value="Liquidificador">Liquidificador</option>
            <option value="Jogo de Toalhas">Jogo de Toalhas</option>
            <option value="Ferro de Passar">Ferro de Passar</option>
            <option value="Aparelho de Jantar">Aparelho de Jantar</option>
            <option value="Panela de Pressão">Panela de Pressão</option>
        </select>
        <button type="submit">Escolher Presente</button>
    </form>
    <div id="presentes-selecionados"></div>
</div>


<!-- Seção: Administração (Somente admin) -->
<div id="admin" class="tabcontent">
    <h2>Administração</h2>
    <h3>Confirmados (Presenças)</h3>
    <div id="admin-presencas"></div>
    <h3>Lista de Presentes Escolhidos</h3>
    <div id="admin-presentes"></div>
</div>



    <!-- Seção: História do Casal -->
    <div id="historia" class="tabcontent">
        <h2>Nossa História</h2>
        <p>Aqui o casal pode escrever uma breve história sobre como se conheceram, momentos especiais e o que esperam do futuro juntos.</p>
    </div>


    <script src="scripts.js"></script>
    <script type="module">
        // Firebase Configuration
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-analytics.js";
        import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDiC1GOP6lTx545H9fBAW9Pt5jpRtRjLlk",
            authDomain: "comentario-site-c0956.firebaseapp.com",
            databaseURL: "https://comentario-site-c0956-default-rtdb.firebaseio.com",
            projectId: "comentario-site-c0956",
            storageBucket: "comentario-site-c0956.appspot.com",
            messagingSenderId: "720900428201",
            appId: "1:720900428201:web:88e4ed92d814ffd8c4f4b8",
            measurementId: "G-B64QKB1PGN"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Enviar confirmação de presença para o Firebase
        document.getElementById('confirmacao-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const nome = document.getElementById('nome').value.trim();
            const pin = document.getElementById('pin').value.trim();
            const adultos = document.getElementById('adultos').value;
            const criancas = document.getElementById('criancas').value;

            if (nome === '' || pin === '') {
                alert("Por favor, preencha todos os campos.");
                return;
            }

            const confirmacaoRef = ref(database, 'confirmacoes');
            push(confirmacaoRef, {
                nome: nome,
                pin: pin,
                adultos: adultos,
                criancas: criancas
            });

            document.getElementById('confirmacao-form').reset();
        });

        

        // Enviar mensagem para o Firebase
        document.getElementById('mensagem-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const nomeMensagem = document.getElementById('nome-mensagem').value.trim();
            const comentario = document.getElementById('comentario').value.trim();

            if (nomeMensagem === '' || comentario === '') {
                alert("Por favor, preencha todos os campos.");
                return;
            }

            const mensagemRef = ref(database, 'mensagens');
            push(mensagemRef, {
                nome: nomeMensagem,
                comentario: comentario
            });

            document.getElementById('mensagem-form').reset();
        });


       // Enviar escolha de presente para o Firebase
document.getElementById('presentes-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const nomeConvidado = document.getElementById('nome-convidado').value.trim();
    const presenteEscolhido = document.getElementById('presente-lista').value;

    if (nomeConvidado === '' || presenteEscolhido === '') {
        alert("Por favor, preencha todos os campos.");
        return;
    }

    // Estrutura os dados a serem enviados
    const dadosPresente = {
        nome: nomeConvidado,
        presente: presenteEscolhido
    };

    // Envia os dados para o Firebase
    const presenteRef = ref(database, 'presentes/' + nomeConvidado.replace(/\s+/g, '_')); // Usa o nome do convidado como chave
    set(presenteRef, dadosPresente)
        .then(() => {
            alert('Presente escolhido com sucesso!');
            document.getElementById('presentes-form').reset();
            // Remover o presente da lista
            removerPresenteDaLista(presenteEscolhido);
            carregarPresentesEscolhidos(); // Atualiza a lista de presentes escolhidos para o admin
        })
        .catch((error) => {
            console.error("Erro ao escolher presente: ", error);
        });
});

// Função para remover o presente da lista de opções
function removerPresenteDaLista(presenteEscolhido) {
    const presenteLista = document.getElementById('presente-lista');
    const optionToRemove = Array.from(presenteLista.options).find(option => option.value === presenteEscolhido);
    if (optionToRemove) {
        presenteLista.remove(optionToRemove.index);
    }
}

// Carrega os presentes escolhidos ao iniciar a página
window.onload = function() {
    carregarPresentesEscolhidos(); // Carregar presentes escolhidos para admin
};


// Função para exibir os presentes escolhidos na administração
function carregarPresentesEscolhidos() {
    const presentesEscolhidosRef = ref(database, 'presentes/');
    onValue(presentesEscolhidosRef, (snapshot) => {
        const adminPresentesDiv = document.getElementById('admin-presentes');
        adminPresentesDiv.innerHTML = '';  // Limpa os presentes escolhidos antes de atualizar
        snapshot.forEach((childSnapshot) => {
            const presente = childSnapshot.val();
            const presenteElement = document.createElement('p');
            presenteElement.innerHTML = `<strong>${presente.nome}</strong> escolheu <em>${presente.presente}</em>`;
            adminPresentesDiv.appendChild(presenteElement);
        });
    });
}

// Carrega os presentes escolhidos ao iniciar a página
window.onload = function() {
    carregarPresentesEscolhidos(); // Carregar presentes escolhidos para admin
};


    </script>
  
</body>
</html>
